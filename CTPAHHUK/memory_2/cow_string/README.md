# CoW string

Существует несколько подходов к копированию данных.

 - Поверхностное копирование. При копировании объекта его содержимое не копируется, а все копии объекта имеют доступ к одним и тем же данным.
 - Глубокое копирование. При копировании все содержимое копируется и разные копии объекта имеют собственные данные.
 - Копирование при модификации (CoW - copy on write). При копирование содержимое не копируется, а делится между копиями, но как только объект производит модифицирующую операцию, он предварительно копирует общие данные себе и модифицирует уже их. Это позволяет сэкномить на копированиях, когда они не нужны, т.е. мы не меняем объект.

Стандартные контейнеры используют глубокое копирование, т.к. это более естественный подход. Однако, в некоторых случаях, можно добиться лучшей производительности, используя другие виды копирования.

В этой задаче предлагается реализовать CoW строку.

## Реализация

Для реализации потребуется вынести общие данные в отдельную структуру, в которой так же надо будет хранить счетчик ссылок (количество объектов ссылающихся на эти данные).

```cpp
struct State {
    int ref_count; // сколько строк используют этот State.
    ...
};
```

Имея счетчик ссылок, можно понимать, когда требуется удалить или скопировать State.
